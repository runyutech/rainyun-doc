# 雨云文档

这里是雨云文档的存储库，基于[docusaurus](https://docusaurus.io/zh-CN/docs/category/guides)编写，欢迎修改然后发起PR，感谢贡献！

## 安装

```
$ yarn
```

## 本地开发

```
$ yarn start
```

这个命令会启动本地开发服务器，然后自动调起浏览器窗口，修改文档后可以自动在页面呈现，而不需要重启服务器。

雨云
https://www.rainyun.com

## 编辑

### 网站基本配置

如果需要网站名称、描述、logo、主题等，可以编辑`docusaurus.config.js`文件，编辑方法可以参考[docusaurus-config](https://docusaurus.io/zh-CN/docs/api/docusaurus-config)。

### 添加、修改文档

如果需要添加或修改文档，可以在`docs`目录下添加或修改文档，文档的格式为markdown格式，文件名为`*.md`，例如`index.md`。

文档的标题和描述可以在文件头部添加，例如：

```markdown
---
title: 文章标题
description: 文章描述
sidebar_position: 100 //侧边栏位置，数字越小越靠前
toc_max_heading_level: 2 //目录最大标题级别，默认是2
---
```

如果只需要配置标题，可以直接修改文档内的 `H1` 标签，例如：

```markdown
# 文章标题
```

### 侧边栏

可以在`sidebars.js`配置侧边栏，docusaurus默认侧边栏使用自动生成的方式，自动生成的侧边栏会根据文档的文件夹结构来生成，当然也可以手动配置。

目前雨云文档的第一级侧边栏需要手动配置，其他为自动生成。下边只说明有关雨云文档的配置方法，其他的可以参考[docusaurus-sidebars](https://docusaurus.io/zh-CN/docs/sidebar)。

#### 配置第一级侧边栏

如果需要添加或删除第一级侧边栏，可以在`sidebars.js`文件中找到`sidebar`变量，修改`tutorialSidebar`并在下方添加或删除对应的对象。

例如需要添加一个`裸金属物理机`的侧边栏，可以使用以下代码

```json
{
    "type": "link",//代表链接
    "label": "裸金属物理机",//侧边栏名称
    "className": "icon-rbm",//侧边栏css类名
    "href": "/docs/category/rbm",//链接地址
}
```

修改`tutorialSidebar`后，还需要在`sidebar`中添加对应的对象，例如

```javascript
rpc: [{
    "type": "category",
    "label": "裸金属物理机",
    link: {
        type: 'generated-index',
        title: '裸金属物理机',//文件夹名称
        description: '关于裸金属物理机的文档。', //描述
        slug: "/category/rbm" //链接地址，一般为 "/category/文件夹名称"
    },
    "items": [
        {
            "type": "autogenerated", //二级侧边栏自动生成
            "dirName": "rbm" //文件夹名称
        }]
},]
```

配置后还需要在对应的文件夹下添加名为`_category_.json`的文件并编辑以下内容：
```json
{
  "label": "裸金属物理机", //侧边栏名称
  "position": 7, //侧边栏排序优先级，数字越小越靠前
  "link": {
    "type": "generated-index",
    "description": "快速上手裸金属物理机。"//描述
  },
  "className": "icon-rbm"//侧边栏css类名
}
```

配置后可以在`docs/rbm`目录下添加文档，文档的文件名为`*.md`，例如`index.md`。
并且还需要在`icon.scss`上配置对应的图标，具体可以参考下方的`样式主题`部分。


#### 配置二级侧边栏
二级侧边栏的配置方法和第一级侧边栏类似，但`不需要配置sidebars.js`文件，只需要新建一个文件夹并且配置`_category_.json`文件，配置后放入对应的文档即可。
例如需要在`裸金属物理机`下添加一个`购买指南`的目录，可以在`docs/rbm`目录下新建一个`购买指南`的文件夹，并在该文件夹下添加一个名为`_category_.json`的文件，内容如下：

```json
{
  "label": "购买指南",//侧边栏名称
  "position": 2,//侧边栏排序优先级，数字越小越靠前
  "link": {
    "type": "generated-index"
  }
}
```
然后在该文件夹下添加文档即可。

### 样式主题
修改网站的样式主题，可以在`src/css/custom.css`文件中添加样式，或者在`docusaurus.config.js`文件中修改主题配置。

#### 侧边栏图标
侧边栏图片一般存放在`src/css/icon.css`文件内，图标可以使用base64或者svg，图标库为[font-awesome](https://fontawesome.com/icons?d=gallery&p=2&m=free)。

图标需要按照以下css选择器配置,xxxxxx为在`_category_.json`或`sidebars.js`配置的类名：
```css
li.xxxxxx>a:before{
    content: "url()";
}

li.xxxxxx>.menu__list-item-collapsible>.menu__link--sublist:before {
    content: "url()";
}
```
为了适配深色模式，图标需要配置两种颜色的图标，深色图标需要在`[data-theme='dark']`上添加。